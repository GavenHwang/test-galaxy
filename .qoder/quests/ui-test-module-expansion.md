# UI测试模块产品字段扩展

## 需求概述

为UI测试系统的所有核心模块增加"产品"字段，用于区分不同产品的测试数据，实现多产品测试数据的统一管理和隔离。

### 背景说明

当前系统中测试用户模块已经实现了产品字段，需要将此能力扩展至其他所有UI测试模块，包括页面元素、测试用例、测试套件、测试单和测试报告，以实现完整的多产品支持。

### 核心目标

统一管理产品维度，支持按产品筛选和检索，提升多产品并行测试的管理效率。

## 影响范围

### 涉及模块

| 模块名称 | 当前状态 | 是否需要改造 |
|---------|---------|------------|
| 测试用户 | 已实现产品字段 | 否 |
| 页面元素 | 未实现 | 是 |
| 测试用例 | 未实现 | 是 |
| 测试套件 | 未实现 | 是 |
| 测试单 | 未实现 | 是 |
| 测试报告 | 未实现 | 是 |

### 产品数据管理策略

新增独立的产品主数据表，用于集中维护所有产品信息，所有模块的产品下拉列表均从此表读取。

## 数据模型设计

### 新增产品主数据表

#### 表结构定义

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| id | BigInt | 主键、自增 | 主键ID |
| name | String(100) | 非空、唯一 | 产品名称 |
| code | String(50) | 可空、唯一 | 产品编码 |
| description | Text | 可空 | 产品描述 |
| status | String(20) | 非空、默认"启用" | 状态（启用、禁用） |
| sort_order | Integer | 默认0 | 排序序号 |
| created_by | String(50) | 非空 | 创建人 |
| created_time | DateTime | 自动填充 | 创建时间 |
| updated_time | DateTime | 自动更新 | 更新时间 |

#### 初始数据

系统初始化时自动插入以下默认产品数据：

| 名称 | 编码 | 排序 | 状态 |
|-----|------|------|------|
| 平台端 | PLATFORM | 1 | 启用 |
| 集群端 | CLUSTER | 2 | 启用 |
| 通用市场 | COMMON_MARKET | 3 | 启用 |

### 现有模块字段扩展

#### 页面元素表（test_ui_elements）

新增字段：

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| product | String(100) | 非空、索引 | 所属产品，关联产品表name字段 |

数据迁移策略：为历史数据设置默认值"平台端"

#### 测试用例表（test_ui_cases）

新增字段：

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| product | String(100) | 非空、索引 | 所属产品，关联产品表name字段 |

数据迁移策略：为历史数据设置默认值"平台端"

#### 测试套件表（test_ui_case_suites）

新增字段：

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| product | String(100) | 非空、索引 | 所属产品，关联产品表name字段 |

业务规则变更：套件仅能关联同一产品的测试用例

#### 测试单表（test_ui_tasks）

新增字段：

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| product | String(100) | 非空、索引 | 所属产品，关联产品表name字段 |

业务规则变更：测试单仅能选择同一产品的套件和用例

#### 测试报告表（test_ui_reports）

新增字段：

| 字段名称 | 数据类型 | 约束 | 说明 |
|---------|---------|-----|------|
| product | String(100) | 非空、索引 | 所属产品，继承自关联的测试单 |

数据填充策略：创建报告时自动从测试单继承产品字段

## 后端API设计

### 产品管理API

#### 接口清单

| 接口路径 | 方法 | 说明 |
|---------|------|------|
| /api/products | GET | 获取产品列表（分页） |
| /api/products/all | GET | 获取所有启用的产品（不分页） |
| /api/products | POST | 创建产品 |
| /api/products/{id} | PUT | 更新产品 |
| /api/products/{id} | DELETE | 删除产品 |
| /api/products/{id}/status | PATCH | 更新产品状态 |

#### 获取所有启用的产品

返回数据结构：

```
字段：name - 产品名称
字段：code - 产品编码
字段：sort_order - 排序序号

按sort_order升序排序
仅返回status为"启用"的产品
```

用途：供所有模块的产品下拉选择器使用

### 现有API接口调整

#### 页面元素API（/api/test-elements）

创建接口调整：
- 请求参数新增必填字段product
- 唯一性校验调整为：同一产品下同一页面的元素名称唯一

列表接口调整：
- 查询参数新增product（精确匹配）
- 支持按产品筛选

#### 测试用例API（/api/test-cases）

创建接口调整：
- 请求参数新增必填字段product

列表接口调整：
- 查询参数新增product（精确匹配）
- 支持按产品筛选

#### 测试套件API（/api/test-suites）

创建接口调整：
- 请求参数新增必填字段product

添加用例到套件接口调整：
- 验证规则：仅允许添加与套件相同产品的用例
- 验证失败时返回错误提示

列表接口调整：
- 查询参数新增product（精确匹配）
- 支持按产品筛选

#### 测试单API（/api/test-tasks）

创建接口调整：
- 请求参数新增必填字段product

选择套件/用例接口调整：
- 验证规则：仅允许选择与测试单相同产品的套件和用例
- 验证失败时返回错误提示

列表接口调整：
- 查询参数新增product（精确匹配）
- 支持按产品筛选

#### 测试报告API（/api/test-reports）

创建报告逻辑调整：
- 自动从关联的测试单继承product字段值

列表接口调整：
- 查询参数新增product（精确匹配）
- 支持按产品筛选

### Schema定义调整

#### 创建/更新Schema

所有涉及模块的CreateSchema和UpdateSchema均需新增product字段：

| Schema名称 | 字段定义 |
|-----------|---------|
| UIElementCreateSchema | product: 必填，字符串，最大长度100 |
| UIElementUpdateSchema | product: 可选，字符串，最大长度100 |
| TestCaseCreateSchema | product: 必填，字符串，最大长度100 |
| TestCaseUpdateSchema | product: 可选，字符串，最大长度100 |
| TestSuiteCreateSchema | product: 必填，字符串，最大长度100 |
| TestSuiteUpdateSchema | product: 可选，字符串，最大长度100 |
| TestTaskCreateSchema | product: 必填，字符串，最大长度100 |
| TestTaskUpdateSchema | product: 可选，字符串，最大长度100 |

#### 响应Schema

所有涉及模块的ResponseSchema均需新增product字段用于展示：

| Schema名称 | 字段定义 |
|-----------|---------|
| UIElementResponseSchema | product: 字符串 |
| TestCaseResponseSchema | product: 字符串 |
| TestSuiteResponseSchema | product: 字符串 |
| TestTaskResponseSchema | product: 字符串 |
| TestReportResponseSchema | product: 字符串 |

#### 列表查询参数Schema

所有涉及模块的ListParams均需新增product筛选参数：

| Schema名称 | 字段定义 |
|-----------|---------|
| UIElementListParams | product: 可选，字符串，精确匹配 |
| TestCaseListParams | product: 可选，字符串，精确匹配 |
| TestSuiteListParams | product: 可选，字符串，精确匹配 |
| TestTaskListParams | product: 可选，字符串，精确匹配 |
| TestReportListParams | product: 可选，字符串，精确匹配 |

## 前端界面设计

### 全局产品数据管理

#### 产品选项加载机制

调用接口：GET /api/products/all

缓存策略：首次加载后存入全局状态，避免重复请求

刷新时机：
- 页面初始化时加载
- 表单对话框打开时加载
- 产品管理页面操作后刷新

#### 下拉选择器规范

组件类型：el-select

配置属性：
- filterable: 启用搜索过滤
- clearable: 允许清空选择
- placeholder: "请选择产品"

选项来源：统一从全局产品选项加载

### 各模块页面调整

#### 页面元素管理（Elements.vue）

搜索区域调整：
- 在定位器类型筛选项后新增"产品"筛选下拉框
- 支持按产品精确筛选

表格调整：
- 在元素名称列前插入"产品"列，列宽设置为120px

新建/编辑表单调整：
- 在元素名称字段后新增"产品"必填字段
- 使用产品下拉选择器
- 编辑时产品字段可修改

#### 测试用例管理（TestCases.vue）

搜索区域调整：
- 在现有筛选项中新增"产品"筛选下拉框
- 支持按产品精确筛选

表格调整：
- 在用例名称列前插入"产品"列，列宽设置为120px

新建/编辑表单调整：
- 在用例名称字段后新增"产品"必填字段
- 使用产品下拉选择器
- 编辑时产品字段可修改

#### 测试套件管理（TestSuites.vue）

搜索区域调整：
- 在现有筛选项中新增"产品"筛选下拉框
- 支持按产品精确筛选

表格调整：
- 在套件名称列前插入"产品"列，列宽设置为120px

新建/编辑表单调整：
- 在套件名称字段后新增"产品"必填字段
- 使用产品下拉选择器
- 编辑时产品字段可修改

用例选择交互调整：
- 用例列表仅展示与套件相同产品的用例
- 选择用例前校验产品一致性
- 产品不一致时显示提示信息

#### 测试单管理（TestTasks.vue）

搜索区域调整：
- 在环境筛选项后新增"产品"筛选下拉框
- 支持按产品精确筛选

表格调整：
- 在测试单名称列后插入"产品"列，列宽设置为120px

新建/编辑表单调整：
- 在测试单名称字段后新增"产品"必填字段
- 使用产品下拉选择器
- 编辑时产品字段可修改

套件/用例选择交互调整：
- 套件和用例列表仅展示与测试单相同产品的数据
- 产品字段变更时自动清空已选的套件和用例
- 选择时前端进行产品一致性校验

#### 测试报告管理（TestReports.vue）

搜索区域调整：
- 在现有筛选项中新增"产品"筛选下拉框
- 支持按产品精确筛选

表格调整：
- 在报告名称列附近插入"产品"列，列宽设置为120px

详情查看：
- 报告详情中展示产品信息

### 表单验证规则

#### 产品字段验证

所有涉及产品字段的表单均需添加验证规则：

规则定义：
- 必填校验：required为true，提示"请选择产品"
- 长度校验：最大长度100字符

触发时机：blur和change事件

### 用户交互提示

#### 产品不一致提示

场景一：测试套件添加用例时产品不一致
- 提示内容："所选用例的产品与套件不一致，无法添加"
- 提示类型：警告消息

场景二：测试单选择套件/用例时产品不一致
- 提示内容："所选套件/用例的产品与测试单不一致，无法添加"
- 提示类型：警告消息

场景三：测试单产品字段变更
- 提示内容："修改产品将清空已选择的套件和用例，是否继续？"
- 提示类型：确认对话框

## 数据迁移方案

### 迁移脚本设计

#### 脚本执行顺序

步骤一：创建产品主数据表

步骤二：插入初始产品数据

步骤三：为各业务表添加product字段

步骤四：为历史数据填充默认产品值（平台端）

步骤五：为product字段添加索引

步骤六：验证数据完整性

### 回滚策略

如果迁移失败，需支持回滚操作：

步骤一：删除业务表中的product字段

步骤二：删除产品主数据表

步骤三：恢复原有表结构

### 数据完整性验证

迁移完成后执行的检查项：

- 检查所有业务表的product字段是否已创建
- 检查历史数据的product字段是否已填充
- 检查product字段的索引是否已创建
- 检查产品表的初始数据是否存在

## 业务规则调整

### 唯一性约束调整

#### 页面元素唯一性

原规则：同一页面下元素名称唯一

新规则：同一产品下同一页面的元素名称唯一

### 关联数据过滤规则

#### 测试套件关联用例

规则：仅允许关联同一产品的测试用例

校验时机：添加用例到套件时进行校验

#### 测试单选择套件/用例

规则：仅允许选择同一产品的套件和用例

校验时机：添加套件或用例到测试单时进行校验

### 数据继承规则

#### 测试报告继承产品

规则：测试报告的产品字段自动继承自关联的测试单

执行时机：创建测试报告时自动填充

## 技术实施要点

### 数据库层面

索引策略：
- 所有新增的product字段均需创建普通索引
- 索引名称规范：idx_产品名_product

字段默认值：不设置数据库级默认值，由应用层控制

### 后端实现层面

参数校验：
- 创建接口必须校验product字段非空
- 关联操作必须校验产品一致性

错误处理：
- 产品不一致时返回业务错误码400
- 错误信息需明确指出不一致的具体内容

### 前端实现层面

状态管理：
- 产品选项存储在全局状态中
- 避免每个组件重复请求产品列表

组件复用：
- 产品下拉选择器可封装为通用组件
- 统一样式和交互行为

### 性能优化考虑

数据库查询优化：
- 利用product字段索引提升筛选性能
- 关联查询时优先过滤product条件

前端加载优化：
- 产品列表仅在必要时重新加载
- 使用缓存减少网络请求

## 测试验证要点

### 功能测试

数据创建测试：
- 验证所有模块能否正确创建带产品字段的数据
- 验证产品字段为必填且不能为空

数据筛选测试：
- 验证所有模块能否按产品正确筛选
- 验证筛选结果与选择的产品一致

关联校验测试：
- 验证测试套件只能添加同产品的用例
- 验证测试单只能选择同产品的套件和用例
- 验证产品不一致时能正确拦截并提示

数据继承测试：
- 验证测试报告能正确继承测试单的产品字段

### 兼容性测试

历史数据兼容性：
- 验证迁移后的历史数据能否正常查看和编辑
- 验证历史数据的产品字段已正确填充默认值

接口兼容性：
- 验证前端调用调整后的接口能正常工作
- 验证响应数据包含产品字段

### 性能测试

查询性能测试：
- 验证按产品筛选的查询响应时间
- 验证product索引是否生效

列表加载测试：
- 验证大数据量下产品筛选的性能表现

## 实施风险与应对

### 数据迁移风险

风险描述：迁移脚本执行失败可能导致数据不一致

应对措施：
- 迁移前完整备份数据库
- 先在测试环境完整验证迁移脚本
- 制定详细的回滚方案
- 分步执行并记录每步结果

### 业务中断风险

风险描述：部署过程中可能影响正在执行的测试任务

应对措施：
- 选择业务低峰期进行部署
- 部署前暂停所有正在执行的测试单
- 部署完成后验证功能正常再恢复业务

### 用户习惯影响

风险描述：新增必填字段可能影响用户操作流程

应对措施：
- 提供产品字段的默认值建议
- 在界面上提供明确的操作指引
- 准备用户操作文档和培训材料

## 产品管理界面设计

### 菜单配置

#### 菜单位置

菜单归属：系统设置（一级菜单）

菜单名称：产品管理（二级菜单）

菜单路径：/settings/products

菜单图标：使用Element Plus图标库中的Management或Grid图标

排序位置：在系统设置菜单下，位于用户管理等基础配置菜单之后

#### 权限控制

访问权限：仅系统管理员角色可访问

操作权限：支持查看、新建、编辑、删除、启用/禁用操作

### 页面布局设计

#### 整体结构

页面类型：标准列表页

布局方式：页面头部 + 数据表格 + 分页组件 + 弹窗表单

样式规范：遵循系统统一的页面容器样式（page-container）

#### 页面头部

左侧操作区：
- 新建产品按钮（主要按钮样式，包含加号图标）

右侧搜索区：
- 产品名称搜索框（支持模糊搜索）
- 状态筛选下拉框（全部、启用、禁用）
- 搜索按钮和重置按钮

#### 数据表格

表格列定义：

| 列名称 | 列宽 | 对齐方式 | 说明 |
|-------|------|---------|------|
| 排序 | 80px | 居中 | 显示排序序号，支持拖拽调整 |
| 产品名称 | 180px | 左对齐 | 必填，唯一标识 |
| 产品编码 | 150px | 左对齐 | 可选，用于系统集成 |
| 状态 | 100px | 居中 | 使用标签组件展示（启用/禁用） |
| 描述 | 自适应 | 左对齐 | 支持超长文本省略 |
| 创建人 | 120px | 左对齐 | 显示创建者用户名 |
| 创建时间 | 180px | 左对齐 | YYYY-MM-DD HH:mm:ss格式 |
| 操作 | 180px | 居中 | 固定右侧，包含操作按钮 |

表格特性：
- 支持斑马纹显示
- 支持边框线
- 支持加载状态
- 默认按sort_order升序排序，相同时按创建时间倒序

#### 操作列按钮

按钮配置：

| 操作名称 | 图标 | 按钮类型 | 显示条件 |
|---------|------|---------|----------|
| 编辑 | Edit | 文本按钮（主要色） | 始终显示 |
| 启用/禁用 | CircleCheck/CircleClose | 文本按钮（主要色） | 根据状态动态切换 |
| 删除 | Delete | 文本按钮（危险色） | 始终显示 |

交互方式：使用Tooltip提示操作名称

#### 分页组件

分页配置：
- 默认每页20条
- 可选每页条数：10、20、50、100
- 布局：total, sizes, prev, pager, next, jumper
- 样式：遵循全局分页组件样式规范

### 表单设计

#### 新建/编辑对话框

对话框配置：
- 标题：新建产品 / 编辑产品
- 宽度：500px
- 关闭方式：支持点击遮罩层和ESC键关闭

#### 表单字段定义

| 字段名称 | 字段类型 | 是否必填 | 验证规则 | 说明 |
|---------|---------|---------|---------|------|
| 产品名称 | 单行文本输入框 | 是 | 长度1-100字符，唯一性校验 | placeholder: 请输入产品名称 |
| 产品编码 | 单行文本输入框 | 否 | 长度1-50字符，仅字母数字下划线，唯一性校验 | placeholder: 请输入产品编码，如：PLATFORM |
| 状态 | 单选下拉框 | 是 | 必选 | 选项：启用、禁用，默认启用 |
| 排序序号 | 数字输入框 | 否 | 整数，范围0-9999 | 默认值：当前最大排序+1，数字越小越靠前 |
| 描述 | 多行文本输入框 | 否 | 最大长度500字符 | 行数：3行，placeholder: 请输入产品描述 |

#### 表单验证规则

产品名称验证：
- 必填校验：提示"请输入产品名称"
- 长度校验：1-100字符
- 唯一性校验：新建时检查名称是否已存在，编辑时排除自身
- 触发时机：blur事件

产品编码验证：
- 格式校验：仅允许大小写字母、数字和下划线
- 长度校验：1-50字符
- 唯一性校验：如果填写了编码，需检查是否已存在
- 触发时机：blur事件

状态验证：
- 必选校验：提示"请选择状态"
- 触发时机：change事件

排序序号验证：
- 范围校验：0-9999之间的整数
- 触发时机：blur事件

描述验证：
- 长度校验：最大500字符
- 触发时机：blur事件

#### 表单底部操作

按钮布局：
- 取消按钮（左侧，默认样式）
- 确定按钮（右侧，主要样式，支持loading状态）

### 交互行为设计

#### 新建产品

触发方式：点击"新建产品"按钮

执行流程：
1. 打开新建产品对话框
2. 表单字段为空，状态默认为"启用"
3. 排序序号自动设置为当前最大值+1
4. 用户填写表单并提交
5. 前端验证通过后调用创建接口
6. 创建成功后关闭对话框，刷新列表，显示成功提示
7. 创建失败显示错误信息

#### 编辑产品

触发方式：点击表格操作列的"编辑"按钮

执行流程：
1. 打开编辑产品对话框
2. 表单字段填充当前产品数据
3. 用户修改表单并提交
4. 前端验证通过后调用更新接口
5. 更新成功后关闭对话框，刷新列表，显示成功提示
6. 更新失败显示错误信息

#### 启用/禁用产品

触发方式：点击表格操作列的"启用"或"禁用"按钮

执行流程：
1. 弹出确认对话框
   - 启用提示：确定要启用该产品吗？启用后将在下拉选择器中显示
   - 禁用提示：确定要禁用该产品吗？禁用后将不在下拉选择器中显示
2. 用户确认后调用状态更新接口
3. 更新成功后刷新列表，显示成功提示
4. 更新失败显示错误信息

#### 删除产品

触发方式：点击表格操作列的"删除"按钮

执行流程：
1. 弹出确认对话框：删除后不可恢复，是否确认删除？
2. 用户确认后调用删除接口
3. 后端检查是否有关联数据（元素、用例、套件、测试单、报告）
4. 如有关联数据，返回错误提示："该产品已被X个元素、X个用例、X个套件、X个测试单、X个报告使用，无法删除"
5. 如无关联数据，删除成功后刷新列表，显示成功提示

#### 搜索和筛选

触发方式：
- 输入产品名称后按回车或点击搜索按钮
- 选择状态筛选项自动触发搜索

执行流程：
1. 重置页码为第1页
2. 根据搜索条件调用列表接口
3. 更新表格数据

重置操作：
- 清空所有搜索条件
- 重置页码为第1页
- 重新加载列表数据

#### 排序调整（后续优化）

交互方式：表格行支持拖拽

执行流程：
1. 用户拖拽表格行调整顺序
2. 松开鼠标后自动保存新的排序
3. 调用批量更新排序接口
4. 更新成功显示提示，失败则恢复原顺序

### 后端接口设计

#### 创建产品

接口路径：POST /api/products

请求参数：

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| name | String | 是 | 产品名称 |
| code | String | 否 | 产品编码 |
| status | String | 是 | 状态（启用/禁用） |
| sort_order | Integer | 否 | 排序序号 |
| description | String | 否 | 描述 |

验证规则：
- name唯一性校验
- code唯一性校验（如果提供）
- 自动记录创建人

返回数据：创建成功的产品对象

#### 更新产品

接口路径：PUT /api/products/{id}

请求参数：同创建接口（所有字段可选）

验证规则：
- name唯一性校验（排除自身）
- code唯一性校验（排除自身）

返回数据：更新后的产品对象

#### 删除产品

接口路径：DELETE /api/products/{id}

验证规则：
- 检查是否有元素关联此产品
- 检查是否有用例关联此产品
- 检查是否有套件关联此产品
- 检查是否有测试单关联此产品
- 检查是否有报告关联此产品
- 如有任何关联，返回错误信息并拒绝删除

返回数据：删除成功提示

#### 更新产品状态

接口路径：PATCH /api/products/{id}/status

请求参数：

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| status | String | 是 | 新状态（启用/禁用） |

返回数据：更新后的产品对象

#### 获取产品列表（分页）

接口路径：GET /api/products

查询参数：

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| page | Integer | 否 | 页码，默认1 |
| page_size | Integer | 否 | 每页条数，默认20 |
| name | String | 否 | 产品名称模糊搜索 |
| status | String | 否 | 状态筛选 |

返回数据：分页数据结构

数据结构：
- items: 产品对象数组
- total: 总记录数
- page: 当前页码
- page_size: 每页条数
- pages: 总页数

#### 获取所有启用的产品

接口路径：GET /api/products/all

查询参数：无

返回数据：所有状态为"启用"的产品数组，按sort_order升序排序

### 前端组件实现要点

#### 文件位置

文件路径：frontend/src/views/Settings/Products.vue

路由配置：在router/index.js中注册路由/settings/products

#### 状态管理

本地状态：
- tableData: 表格数据数组
- total: 总记录数
- currentPage: 当前页码
- pageSize: 每页条数
- loading: 加载状态
- searchForm: 搜索表单对象（name, status）
- dialogVisible: 对话框显示状态
- dialogTitle: 对话框标题
- formData: 表单数据对象
- isEdit: 是否为编辑模式
- editId: 编辑的产品ID

#### API调用

API方法定义：在frontend/src/api/uitest.js中新增：
- getProducts(params): 获取产品列表（分页）
- getAllProducts(): 获取所有启用的产品
- createProduct(data): 创建产品
- updateProduct(id, data): 更新产品
- deleteProduct(id): 删除产品
- updateProductStatus(id, status): 更新产品状态

#### 自动搜索支持

使用useAutoSearch组合式函数：
- inputFields: ['name'] - 产品名称支持防抖搜索
- selectFields: ['status'] - 状态选择立即触发搜索
- debounceDelay: 500 - 防抖延迟0.5秒

### 样式规范

#### 组件样式

遵循全局样式变量：
- 引用：@import '@/assets/less/variables.less'
- 使用全局定义的page-container、page-header、pagination等样式类
- 操作按钮使用action-buttons布局

#### 状态标签样式

启用状态：
- 标签类型：success
- 显示文字：启用

禁用状态：
- 标签类型：info
- 显示文字：禁用

### 数据同步机制

#### 产品列表缓存刷新

触发时机：
- 产品创建成功后
- 产品更新成功后
- 产品删除成功后
- 产品状态变更后

刷新策略：
- 清除全局产品选项缓存
- 通知其他已打开的页面重新加载产品列表
- 可使用事件总线或状态管理实现跨组件通知

## 后续优化方向

### 产品管理增强

产品分组：支持对产品进行分类分组管理

产品图标：支持为每个产品配置专属图标或颜色标识

产品配置：支持为产品配置额外的元数据（如负责人、联系方式等）

### 数据隔离增强

权限控制：根据用户角色限制可访问的产品范围

数据统计：提供按产品维度的测试数据统计分析

批量操作：支持批量修改数据的产品归属

### 用户体验优化

智能推荐：根据用户历史操作推荐常用产品

快捷切换：提供产品维度的快捷切换入口

产品标识：使用颜色或图标区分不同产品的数据

批量导入导出：支持产品数据的批量导入和导出
